[{"/Users/bar-study/study-workspace/BlockchainProject/final-proj/client/src/index.js":"1","/Users/bar-study/study-workspace/BlockchainProject/final-proj/client/src/reportWebVitals.js":"2","/Users/bar-study/study-workspace/BlockchainProject/final-proj/client/src/App.jsx":"3","/Users/bar-study/study-workspace/BlockchainProject/final-proj/client/src/screens/Home.js":"4","/Users/bar-study/study-workspace/BlockchainProject/final-proj/client/src/screens/CoverPage.jsx":"5","/Users/bar-study/study-workspace/BlockchainProject/final-proj/client/src/components/Header.js":"6","/Users/bar-study/study-workspace/BlockchainProject/final-proj/client/src/screens/Vote.js":"7","/Users/bar-study/study-workspace/BlockchainProject/final-proj/client/src/screens/Admin.js":"8","/Users/bar-study/study-workspace/BlockchainProject/final-proj/client/src/utils/getWeb3.js":"9","/Users/bar-study/study-workspace/BlockchainProject/final-proj/client/src/utils/enums.js":"10","/Users/bar-study/study-workspace/BlockchainProject/final-proj/client/src/components/CoverLayout.jsx":"11","/Users/bar-study/study-workspace/BlockchainProject/final-proj/client/src/utils/generalUtils.js":"12","/Users/bar-study/study-workspace/BlockchainProject/final-proj/client/src/components/CandidateCard.js":"13","/Users/bar-study/study-workspace/BlockchainProject/final-proj/client/src/components/CandidateForm.js":"14"},{"size":586,"mtime":1711487785238,"results":"15","hashOfConfig":"16"},{"size":364,"mtime":1711384837331,"results":"17","hashOfConfig":"16"},{"size":649,"mtime":1711501572465,"results":"18","hashOfConfig":"16"},{"size":2284,"mtime":1711493571842,"results":"19","hashOfConfig":"16"},{"size":955,"mtime":1711503179411,"results":"20","hashOfConfig":"16"},{"size":1373,"mtime":1711503205710,"results":"21","hashOfConfig":"16"},{"size":3897,"mtime":1711477987393,"results":"22","hashOfConfig":"16"},{"size":5246,"mtime":1711576218021,"results":"23","hashOfConfig":"16"},{"size":1417,"mtime":1711495226806,"results":"24","hashOfConfig":"16"},{"size":84,"mtime":1711492495456,"results":"25","hashOfConfig":"16"},{"size":1461,"mtime":1711503332196,"results":"26","hashOfConfig":"16"},{"size":143,"mtime":1711490957556,"results":"27","hashOfConfig":"16"},{"size":959,"mtime":1711503329146,"results":"28","hashOfConfig":"16"},{"size":1142,"mtime":1711503330548,"results":"29","hashOfConfig":"16"},{"filePath":"30","messages":"31","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},"104qkk2",{"filePath":"33","messages":"34","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"35","messages":"36","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"37","messages":"38","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"39","usedDeprecatedRules":"32"},{"filePath":"40","messages":"41","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"42","messages":"43","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"44","messages":"45","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"46","usedDeprecatedRules":"32"},{"filePath":"47","messages":"48","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":null},{"filePath":"49","messages":"50","errorCount":0,"fatalErrorCount":0,"warningCount":1,"fixableErrorCount":0,"fixableWarningCount":0,"source":"51","usedDeprecatedRules":"32"},{"filePath":"52","messages":"53","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"54","messages":"55","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"56","messages":"57","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"58","messages":"59","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},{"filePath":"60","messages":"61","errorCount":0,"fatalErrorCount":0,"warningCount":0,"fixableErrorCount":0,"fixableWarningCount":0,"usedDeprecatedRules":"32"},"/Users/bar-study/study-workspace/BlockchainProject/final-proj/client/src/index.js",[],["62","63"],"/Users/bar-study/study-workspace/BlockchainProject/final-proj/client/src/reportWebVitals.js",[],"/Users/bar-study/study-workspace/BlockchainProject/final-proj/client/src/App.jsx",[],"/Users/bar-study/study-workspace/BlockchainProject/final-proj/client/src/screens/Home.js",["64"],"import { useEffect, useState } from 'react';\nimport Box from '@mui/material/Box';\nimport Vote from './Vote';\nimport Admin from './Admin';\nimport ElectionContract from '../contracts/Election.json';\nimport getWeb3 from '../utils/getWeb3';\nimport RoleEnum from '../utils/enums';\nimport { useNavigate } from 'react-router-dom';\nimport Header from '../components/Header.js';\n\nexport default function Home() {\n\tconsole.log('Home called');\n\tconst navigate = useNavigate();\n\tconst [role, setRole] = useState(RoleEnum.USER);\n\tconst [web3, setWeb3] = useState(null);\n\tconst [currentAccount, setCurrentAccount] = useState(null);\n\tconst [contract, setContract] = useState(null);\n\tconst [loading, setLoading] = useState(true);\n\n\tconst loadWeb3 = async () => {\n\t\ttry {\n\t\t\tconsole.log('loadWeb3 called');\n\t\t\tconst web3 = await getWeb3();\n\t\t\tconst accounts = await web3.eth.getAccounts();\n\t\t\tconst networkId = await web3.eth.net.getId();\n\t\t\tconst deployedNetwork = ElectionContract.networks[networkId];\n\t\t\tconst instance = new web3.eth.Contract(\n\t\t\t\tElectionContract.abi,\n\t\t\t\tdeployedNetwork && deployedNetwork.address\n\t\t\t);\n\t\t\tsetWeb3(web3);\n\t\t\tsetCurrentAccount(accounts[0]);\n\t\t\tsetContract(instance);\n\t\t\tsetLoading(false);\n\t\t} catch (error) {\n\t\t\tconsole.error('Error:', error);\n\t\t\tnavigate('/');\n\t\t}\n\t};\n\n\tconst getRole = async () => {\n\t\tif (contract) {\n\t\t\tconst user = await contract.methods.getRole(currentAccount).call();\n\t\t\tsetRole(parseInt(user));\n\t\t\tconsole.log(`role: ${role}`);\n\t\t\tsetLoading(false);\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tloadWeb3();\n\t\tgetRole();\n\t}, [contract]);\n\n\treturn (\n\t\t<Box\n\t\t\tsx={{\n\t\t\t\tbgcolor: 'background.default',\n\t\t\t\tcolor: 'text.primary',\n\t\t\t\theight: '100vh',\n\t\t\t}}\n\t\t>\n\t\t\t{loading ? (\n\t\t\t\t<Box\n\t\t\t\t\tsx={{\n\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\t\talignItems: 'center',\n\t\t\t\t\t\theight: '80vh',\n\t\t\t\t\t}}\n\t\t\t\t>\n\t\t\t\t\tLoading...\n\t\t\t\t</Box>\n\t\t\t) : (\n\t\t\t\t<Box>\n\t\t\t\t\t<Header role={role} />\n\t\t\t\t\t{role === RoleEnum.ADMIN && (\n\t\t\t\t\t\t<Admin\n\t\t\t\t\t\t\trole={role}\n\t\t\t\t\t\t\tcontract={contract}\n\t\t\t\t\t\t\tweb3={web3}\n\t\t\t\t\t\t\tcurrentAccount={currentAccount}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t\t{role === RoleEnum.USER && (\n\t\t\t\t\t\t<Vote\n\t\t\t\t\t\t\trole={role}\n\t\t\t\t\t\t\tcontract={contract}\n\t\t\t\t\t\t\tweb3={web3}\n\t\t\t\t\t\t\tcurrentAccount={currentAccount}\n\t\t\t\t\t\t/>\n\t\t\t\t\t)}\n\t\t\t\t</Box>\n\t\t\t)}\n\t\t</Box>\n\t);\n}\n","/Users/bar-study/study-workspace/BlockchainProject/final-proj/client/src/screens/CoverPage.jsx",[],"/Users/bar-study/study-workspace/BlockchainProject/final-proj/client/src/components/Header.js",[],"/Users/bar-study/study-workspace/BlockchainProject/final-proj/client/src/screens/Vote.js",["65"],"import { useEffect, useState } from 'react';\nimport Box from '@mui/material/Box';\nimport Grid from '@mui/material/Grid';\nimport Button from '@mui/material/Button';\nimport Typography from '@mui/material/Typography';\nimport Divider from '@mui/material/Divider';\n\nimport Radio from '@mui/material/Radio';\nimport RadioGroup from '@mui/material/RadioGroup';\nimport FormControlLabel from '@mui/material/FormControlLabel';\nimport FormControl from '@mui/material/FormControl';\n\nimport Candidate from '../components/CandidateCard';\n\nexport default function Vote({ contract, currentAccount }) {\n\tconst [candidates, setCandidates] = useState([]);\n\tconst [vote, setVote] = useState(null);\n\tconst [electionState, setElectionState] = useState(0);\n\n\tconst getCandidates = async () => {\n\t\tif (contract) {\n\t\t\tconst count = await contract.methods.candidatesCount().call();\n\t\t\tconst temp = [];\n\t\t\tfor (let i = 0; i < count; i++) {\n\t\t\t\tconst candidate = await contract.methods\n\t\t\t\t\t.getCandidateDetails(i)\n\t\t\t\t\t.call();\n\t\t\t\ttemp.push({ name: candidate[0], votes: candidate[1] });\n\t\t\t}\n\t\t\tsetCandidates(temp);\n\t\t}\n\t};\n\n\tconst voteCandidate = async (candidate) => {\n\t\ttry {\n\t\t\tif (contract) {\n\t\t\t\tawait contract.methods\n\t\t\t\t\t.vote(candidate)\n\t\t\t\t\t.send({ from: currentAccount });\n\t\t\t\tgetCandidates();\n\t\t\t}\n\t\t} catch (error) {\n\t\t\tconsole.error('Error:', error);\n\t\t}\n\t};\n\n\tconst getElectionState = async () => {\n\t\tif (contract) {\n\t\t\tconst state = await contract.methods.electionState().call();\n\t\t\tsetElectionState(parseInt(state));\n\t\t}\n\t};\n\n\tuseEffect(() => {\n\t\tgetElectionState();\n\t\tgetCandidates();\n\t}, [contract]);\n\n\tconst handleVoteChange = (event) => {\n\t\tsetVote(event.target.value);\n\t};\n\n\tconst handleVote = (event) => {\n\t\tevent.preventDefault();\n\t\tvoteCandidate(vote);\n\t};\n\n\treturn (\n\t\t<Box>\n\t\t\t<form onSubmit={handleVote}>\n\t\t\t\t<Grid\n\t\t\t\t\tcontainer\n\t\t\t\t\tsx={{ mt: 0 }}\n\t\t\t\t\tspacing={6}\n\t\t\t\t\tjustifyContent=\"center\"\n\t\t\t\t>\n\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t<Typography align=\"center\" variant=\"h6\">\n\t\t\t\t\t\t\t{electionState === 0 &&\n\t\t\t\t\t\t\t\t'Please Wait... Election has not started yet.'}\n\t\t\t\t\t\t\t{electionState === 1 &&\n\t\t\t\t\t\t\t\t'VOTE FOR YOUR FAVORITE CANDIDATE'}\n\t\t\t\t\t\t\t{electionState === 2 &&\n\t\t\t\t\t\t\t\t'Election has ended. See the results below.'}\n\t\t\t\t\t\t</Typography>\n\t\t\t\t\t\t<Divider />\n\t\t\t\t\t</Grid>\n\t\t\t\t\t{electionState === 1 && (\n\t\t\t\t\t\t<>\n\t\t\t\t\t\t\t<Grid item xs={12}>\n\t\t\t\t\t\t\t\t<FormControl>\n\t\t\t\t\t\t\t\t\t<RadioGroup\n\t\t\t\t\t\t\t\t\t\trow\n\t\t\t\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\t\t\t\toverflowY: 'hidden',\n\t\t\t\t\t\t\t\t\t\t\toverflowX: 'auto',\n\t\t\t\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\t\t\t\twidth: '98vw',\n\t\t\t\t\t\t\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t\t\t\t\tvalue={vote}\n\t\t\t\t\t\t\t\t\t\tonChange={handleVoteChange}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t{candidates.map((candidate, index) => (\n\t\t\t\t\t\t\t\t\t\t\t<FormControlLabel\n\t\t\t\t\t\t\t\t\t\t\t\tkey={index}\n\t\t\t\t\t\t\t\t\t\t\t\tlabelPlacement=\"top\"\n\t\t\t\t\t\t\t\t\t\t\t\tcontrol={<Radio />}\n\t\t\t\t\t\t\t\t\t\t\t\tvalue={index}\n\t\t\t\t\t\t\t\t\t\t\t\tlabel={\n\t\t\t\t\t\t\t\t\t\t\t\t\t<Candidate\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tid={index}\n\t\t\t\t\t\t\t\t\t\t\t\t\t\tname={candidate.name}\n\t\t\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t\t\t\t</RadioGroup>\n\t\t\t\t\t\t\t\t</FormControl>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t\t<Grid item xs={6}>\n\t\t\t\t\t\t\t\t<div style={{ margin: 20 }}>\n\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\ttype=\"submit\"\n\t\t\t\t\t\t\t\t\t\tvariant=\"contained\"\n\t\t\t\t\t\t\t\t\t\tsx={{ width: '100%' }}\n\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\tVote\n\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t</Grid>\n\t\t\t\t\t\t</>\n\t\t\t\t\t)}\n\n\t\t\t\t\t{electionState === 2 && (\n\t\t\t\t\t\t<Grid\n\t\t\t\t\t\t\titem\n\t\t\t\t\t\t\txs={12}\n\t\t\t\t\t\t\tsx={{\n\t\t\t\t\t\t\t\toverflowY: 'hidden',\n\t\t\t\t\t\t\t\toverflowX: 'auto',\n\t\t\t\t\t\t\t\tdisplay: 'flex',\n\t\t\t\t\t\t\t\twidth: '98vw',\n\t\t\t\t\t\t\t\tjustifyContent: 'center',\n\t\t\t\t\t\t\t}}\n\t\t\t\t\t\t>\n\t\t\t\t\t\t\t{candidates &&\n\t\t\t\t\t\t\t\tcandidates.map((candidate, index) => (\n\t\t\t\t\t\t\t\t\t<Box sx={{ mx: 2 }} key={index}>\n\t\t\t\t\t\t\t\t\t\t<Candidate\n\t\t\t\t\t\t\t\t\t\t\tid={index}\n\t\t\t\t\t\t\t\t\t\t\tname={candidate.name}\n\t\t\t\t\t\t\t\t\t\t\tvoteCount={candidate.votes}\n\t\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t</Box>\n\t\t\t\t\t\t\t\t))}\n\t\t\t\t\t\t</Grid>\n\t\t\t\t\t)}\n\t\t\t\t</Grid>\n\t\t\t</form>\n\t\t</Box>\n\t);\n}\n","/Users/bar-study/study-workspace/BlockchainProject/final-proj/client/src/screens/Admin.js",["66"],"/Users/bar-study/study-workspace/BlockchainProject/final-proj/client/src/utils/getWeb3.js",["67"],"import { useNavigate } from 'react-router-dom';\nimport Web3 from 'web3';\n\nconst getWeb3 = () =>\n\tnew Promise((resolve, reject) => {\n\t\twindow.addEventListener('load', async () => {\n\t\t\tif (window.ethereum) {\n\t\t\t\tconst web3 = new Web3(window.ethereum);\n\t\t\t\ttry {\n\t\t\t\t\t// Request account access if needed\n\t\t\t\t\tawait window.ethereum.request({\n\t\t\t\t\t\tmethod: 'eth_requestAccounts',\n\t\t\t\t\t});\n\t\t\t\t\tresolve(web3);\n\n\t\t\t\t\t// Listen for account changes\n\t\t\t\t\twindow.ethereum.on('accountsChanged', (accounts) => {\n\t\t\t\t\t\tif (accounts.length === 0) {\n\t\t\t\t\t\t\tconsole.log('Account disconnected');\n\t\t\t\t\t\t\twindow.location.href = '/';\n\t\t\t\t\t\t} else {\n\t\t\t\t\t\t\t// Reload upon account change\n\t\t\t\t\t\t\tconsole.log('Account changed:', accounts[0]);\n\t\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t\t}\n\t\t\t\t\t});\n\n\t\t\t\t\twindow.ethereum.on('chainChanged', (chainId) => {\n\t\t\t\t\t\tconsole.log('Chain changed to', chainId);\n\t\t\t\t\t\twindow.location.reload();\n\t\t\t\t\t});\n\t\t\t\t} catch (error) {\n\t\t\t\t\treject(error);\n\t\t\t\t}\n\t\t\t}\n\t\t\t// Legacy dapp browsers...\n\t\t\telse if (window.web3) {\n\t\t\t\t// Use Mist/MetaMask's provider.\n\t\t\t\tconst web3 = window.web3;\n\t\t\t\tconsole.log('Injected web3 detected.');\n\t\t\t\tresolve(web3);\n\t\t\t} else {\n\t\t\t\tconst provider = new Web3.providers.HttpProvider(\n\t\t\t\t\t'http://127.0.0.1:7545'\n\t\t\t\t);\n\t\t\t\tconst web3 = new Web3(provider);\n\t\t\t\tconsole.log('No web3 instance injected, using Local web3.');\n\t\t\t\tresolve(web3);\n\t\t\t}\n\t\t});\n\t});\n\nexport default getWeb3;\n","/Users/bar-study/study-workspace/BlockchainProject/final-proj/client/src/utils/enums.js",[],"/Users/bar-study/study-workspace/BlockchainProject/final-proj/client/src/components/CoverLayout.jsx",[],"/Users/bar-study/study-workspace/BlockchainProject/final-proj/client/src/utils/generalUtils.js",[],"/Users/bar-study/study-workspace/BlockchainProject/final-proj/client/src/components/CandidateCard.js",[],"/Users/bar-study/study-workspace/BlockchainProject/final-proj/client/src/components/CandidateForm.js",[],{"ruleId":"68","replacedBy":"69"},{"ruleId":"70","replacedBy":"71"},{"ruleId":"72","severity":1,"message":"73","line":53,"column":5,"nodeType":"74","endLine":53,"endColumn":15,"suggestions":"75"},{"ruleId":"72","severity":1,"message":"76","line":57,"column":5,"nodeType":"74","endLine":57,"endColumn":15,"suggestions":"77"},{"ruleId":"72","severity":1,"message":"76","line":47,"column":5,"nodeType":"74","endLine":47,"endColumn":15,"suggestions":"78"},{"ruleId":"79","severity":1,"message":"80","line":1,"column":10,"nodeType":"81","messageId":"82","endLine":1,"endColumn":21},"no-native-reassign",["83"],"no-negated-in-lhs",["84"],"react-hooks/exhaustive-deps","React Hook useEffect has missing dependencies: 'getRole' and 'loadWeb3'. Either include them or remove the dependency array.","ArrayExpression",["85"],"React Hook useEffect has missing dependencies: 'getCandidates' and 'getElectionState'. Either include them or remove the dependency array.",["86"],["87"],"no-unused-vars","'useNavigate' is defined but never used.","Identifier","unusedVar","no-global-assign","no-unsafe-negation",{"desc":"88","fix":"89"},{"desc":"90","fix":"91"},{"desc":"90","fix":"92"},"Update the dependencies array to be: [contract, getRole, loadWeb3]",{"range":"93","text":"94"},"Update the dependencies array to be: [contract, getCandidates, getElectionState]",{"range":"95","text":"96"},{"range":"97","text":"96"},[1554,1564],"[contract, getRole, loadWeb3]",[1581,1591],"[contract, getCandidates, getElectionState]",[1485,1495]]